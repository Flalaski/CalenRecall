@import './fonts.css';
@import './themes.css';
@import './performance-mode.css';

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* ============================================
   GPU ACCELERATION OPTIMIZATIONS
   ============================================
   These styles enable hardware acceleration for
   better rendering performance across the app.
   ============================================ */

/* Enable GPU acceleration for root elements */
html,
body,
#root {
  /* Optimize compositing */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* GPU acceleration for main app container */
.app {
  /* Optimize rendering */
  contain: layout style paint;
}

/* Prevent flickering during window transitions (maximize/fullscreen) */
body.window-transitioning,
body.window-transitioning * {
  /* Temporarily disable will-change during transitions to prevent GPU thrashing */
  will-change: auto !important;
}

/* Reduce layout recalculations during transitions */
body.window-transitioning .app,
body.window-transitioning .app-content,
body.window-transitioning .timeline-section,
body.window-transitioning .editor-section {
  /* Temporarily relax containment during transitions */
  contain: style paint;
}

/* GPU acceleration for scrollable containers - only enable will-change when scrolling */
.app-content,
.timeline-section,
.editor-section,
.journal-list,
.entry-viewer,
.viewer-content,
.journal-editor {
  /* Optimize scrolling performance */
  -webkit-overflow-scrolling: touch;
  /* Contain layout recalculations */
  contain: layout style paint;
}

/* Only apply will-change when scrolling */
.app-content:active,
.timeline-section:active,
.editor-section:active,
.journal-list:active,
.entry-viewer:active,
.viewer-content:active,
.journal-editor:active {
  will-change: scroll-position;
}

/* EXTREME PERFORMANCE: Disable transitions by default for instant response */
/* GPU acceleration for interactive elements - only enable will-change on hover/active */
button,
.nav-button,
.view-mode-button,
.entry-badge,
.timeline-cell,
.journal-entry-item,
.entry-card,
.entry-card-full {
  /* Optimize hover/click animations */
  backface-visibility: hidden;
  /* DISABLED: Enable smooth transitions - REMOVED for extreme performance */
  /* transition: transform 0.2s ease, opacity 0.2s ease; */
  transition: none; /* Instant response */
}

/* Only apply will-change when interacting */
button:hover,
button:active,
.nav-button:hover,
.nav-button:active,
.view-mode-button:hover,
.view-mode-button:active,
.entry-badge:hover,
.timeline-cell:hover,
.journal-entry-item:hover,
.entry-card:hover,
.entry-card-full:hover {
  will-change: transform, opacity;
}

/* GPU acceleration for animated elements */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateZ(0) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateZ(0) translateY(0);
  }
}

@keyframes slideIn {
  from {
    transform: translateZ(0) translateX(-100%);
  }
  to {
    transform: translateZ(0) translateX(0);
  }
}

/* GPU acceleration for minimap - only enable will-change when dragging */
.minimap-container,
.global-timeline-minimap {
  /* Optimize for smooth dragging */
  contain: layout style paint;
}

/* Only apply will-change when dragging */
.minimap-container.dragging,
.global-timeline-minimap.dragging {
  will-change: transform, scroll-position;
}

/* GPU acceleration for entry indicators in minimap - only when animating */
.entry-indicator,
.timeline-segment,
.segment-indicator {
  /* Optimize for animations */
  backface-visibility: hidden;
}

/* Custom tooltip overlay rendered above the cursor */
.global-tooltip {
  position: fixed;
  top: 0;
  left: 0;
  transform: translate(-50%, calc(-100% - 10px));
  padding: 6px 10px;
  background: rgba(16, 20, 28, 0.95);
  color: #ffffff;
  border-radius: 8px;
  font-size: 12px;
  line-height: 1.4;
  z-index: 100000;
  pointer-events: none;
  opacity: 0;
  transition: opacity 80ms ease, transform 80ms ease;
  white-space: normal;
  max-width: 320px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
}

.global-tooltip.visible {
  opacity: 1;
  transform: translate(-50%, calc(-100% - 8px));
}

/* Only apply will-change when actively animating */
.entry-indicator:hover,
.entry-indicator.active,
.timeline-segment:hover,
.timeline-segment.active,
.segment-indicator:hover,
.segment-indicator.active {
  will-change: transform, opacity;
}

/* GPU acceleration for timeline grid - only when scrolling */
.timeline-grid {
  /* Optimize grid rendering */
  contain: layout style paint;
}

.timeline-grid:active {
  will-change: scroll-position;
}

/* GPU acceleration for modals and overlays - only when animating */
.modal,
.overlay,
.confirm-dialog,
.entry-edit-modal,
.export-metadata-modal {
  /* Optimize modal rendering */
  contain: layout style paint;
}

/* Only apply will-change when modals are animating in/out */
.modal.animating,
.overlay.animating,
.confirm-dialog.animating,
.entry-edit-modal.animating,
.export-metadata-modal.animating {
  will-change: transform, opacity;
}

/* Content visibility optimization for off-screen elements */
.timeline-cell:not(:hover),
.journal-entry-item:not(:hover),
.entry-card:not(:hover) {
  /* Optimize rendering of off-screen elements */
  content-visibility: auto;
  contain-intrinsic-size: auto 100px;
}

/* GPU acceleration for background art */
.background-art {
  /* Optimize background rendering */
  contain: layout style paint;
}

/* GPU acceleration for loading screen - only when animating */
.loading-screen,
.startup-loading {
  /* Optimize loading animations */
  contain: layout style paint;
}

/* Only apply will-change when loading screen is visible/animating */
.loading-screen.animating,
.startup-loading.animating {
  will-change: transform, opacity;
}

/* Optimize font rendering with GPU */
body {
  /* Enable subpixel rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Optimize text rendering */
  text-rendering: optimizeLegibility;
}

/* GPU acceleration for paper texture (pseudo-elements) */
.paper-texture::before,
.paper-texture::after {
  /* Optimize texture animation */
  backface-visibility: hidden;
  /* Only apply will-change when texture is animating */
  will-change: background-position;
}

/* Disable will-change after animations complete to free GPU memory */
.entry-indicator:not(:hover):not(.active),
.timeline-segment:not(:hover):not(.active) {
  will-change: auto;
}

html {
  height: 100%;
  width: 100%;
  /* Background will be set by theme CSS */
  overflow: hidden;
  box-sizing: border-box;
}

#root {
  height: 100vh;
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  /* Background will be set by theme CSS */
}

body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  /* Background will be set by theme CSS */
  overflow: hidden;
  box-sizing: border-box;
  position: relative;
}

/* Ensure containers clip their content without creating gaps */
.app {
  overflow-x: hidden;
  position: relative;
}

.app-content {
  overflow-x: hidden;
}

.timeline-section {
  overflow-x: hidden;
}

.editor-section {
  overflow-x: hidden;
}

/* Ensure html and #root match body background when theme is active */
[data-theme] html {
  background-color: var(--theme-body-bg, transparent);
}

[data-theme] #root {
  background-color: var(--theme-body-bg, transparent);
}

/* Set CSS variable from body background for inheritance */
[data-theme] body {
  --theme-body-bg: inherit;
}

/* Paper-like noise texture - ever-shifting, more visible in shadows */
@keyframes paperNoise {
  0% {
    background-position: 0% 0%;
    opacity: 0.02;
  }
  25% {
    background-position: 100% 50%;
    opacity: 0.035;
  }
  50% {
    background-position: 50% 100%;
    opacity: 0.025;
  }
  75% {
    background-position: 0% 75%;
    opacity: 0.04;
  }
  100% {
    background-position: 100% 0%;
    opacity: 0.02;
  }
}

/* Generate noise texture using SVG filter */
.paper-texture::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  background-size: 200px 200px;
  animation: paperNoise 20s ease-in-out infinite;
  mix-blend-mode: overlay;
  opacity: 0.15;
  z-index: 1;
}

/* Dark theme - noise more visible in shadows */
[data-theme="dark"] .paper-texture::before {
  mix-blend-mode: screen;
  opacity: 0.25;
  filter: contrast(1.2) brightness(0.8);
}

/* Apply paper texture to all elements with backgrounds */
body,
.app,
.app-content,
.timeline-section,
.editor-section,
.navigation-bar,
.journal-list,
.journal-list-header,
.journal-entry-item,
.entry-viewer,
.viewer-header,
.viewer-content,
.journal-editor,
.editor-header,
.timeline-grid,
.timeline-cell,
.entry-badge,
.week-entry-group,
.week-entries-header,
.period-entry-item,
.export-bar,
.nav-button,
.view-mode-button,
.preferences-container,
.preferences-header,
.preferences-section,
.preference-note,
.about-section,
.editor-form,
.editor-footer,
.confirm-dialog,
.week-entry-item,
.month-week-entries-section,
.entry-card,
.entry-card-full,
.cell-date,
.day-header,
.hotkey-diagram-hologram,
.hotkey-key-item,
.hotkey-key,
.tag,
.new-entry-button,
.new-entry-button-header,
.add-tag-button,
.save-button,
.cancel-button,
.delete-button,
.reset-button,
.export-button,
.export-select,
.global-timeline-minimap,
.minimap-container {
  position: relative;
}

body::before,
.app::before,
.app-content::before,
.timeline-section::before,
.editor-section::before,
.navigation-bar::before,
.journal-list::before,
.journal-list-header::before,
.journal-entry-item::before,
.entry-viewer::before,
.viewer-header::before,
.viewer-content::before,
.journal-editor::before,
.editor-header::before,
.timeline-grid::before,
.timeline-cell::before,
.entry-badge::before,
.week-entry-group::before,
.week-entries-header::before,
.period-entry-item::before,
.export-bar::before,
.nav-button::before,
.view-mode-button::before,
.preferences-container::before,
.preferences-header::before,
.preferences-section::before,
.preference-note::before,
.about-section::before,
.editor-form::before,
.editor-footer::before,
.confirm-dialog::before,
.week-entry-item::before,
.month-week-entries-section::before,
.entry-card::before,
.entry-card-full::before,
.cell-date::before,
.day-header::before,
.hotkey-diagram-hologram::before,
.hotkey-key-item::before,
.hotkey-key::before,
.tag::before,
.new-entry-button::before,
.new-entry-button-header::before,
.add-tag-button::before,
.save-button::before,
.cancel-button::before,
.delete-button::before,
.reset-button::before,
.export-button::before,
.export-select::before,
.global-timeline-minimap::before,
.minimap-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  background-size: 200px 200px;
  animation: paperNoise 20s ease-in-out infinite;
  mix-blend-mode: overlay;
  opacity: 0.15;
  z-index: 1;
  border-radius: inherit;
}

/* Only show noise on elements that have a background color/image */
body::before,
.app::before,
.app-content::before,
.timeline-section::before,
.editor-section::before,
.navigation-bar::before,
.journal-list::before,
.journal-list-header::before,
.journal-entry-item::before,
.entry-viewer::before,
.viewer-header::before,
.viewer-content::before,
.journal-editor::before,
.editor-header::before,
.timeline-grid::before,
.timeline-cell::before,
.entry-badge::before,
.week-entry-group::before,
.week-entries-header::before,
.period-entry-item::before,
.export-bar::before,
.nav-button::before,
.view-mode-button::before,
.preferences-container::before,
.preferences-header::before,
.preferences-section::before,
.preference-note::before,
.about-section::before,
.editor-form::before,
.editor-footer::before,
.confirm-dialog::before,
.week-entry-item::before,
.month-week-entries-section::before,
.entry-card::before,
.entry-card-full::before,
.cell-date::before,
.day-header::before,
.hotkey-diagram-hologram::before,
.hotkey-key-item::before,
.hotkey-key::before,
.tag::before,
.new-entry-button::before,
.new-entry-button-header::before,
.add-tag-button::before,
.save-button::before,
.cancel-button::before,
.delete-button::before,
.reset-button::before,
.export-button::before,
.export-select::before {
  opacity: 0.15;
}

[data-theme="dark"] body::before,
[data-theme="dark"] .app::before,
[data-theme="dark"] .app-content::before,
[data-theme="dark"] .timeline-section::before,
[data-theme="dark"] .editor-section::before,
[data-theme="dark"] .navigation-bar::before,
[data-theme="dark"] .journal-list::before,
[data-theme="dark"] .journal-list-header::before,
[data-theme="dark"] .journal-entry-item::before,
[data-theme="dark"] .entry-viewer::before,
[data-theme="dark"] .viewer-header::before,
[data-theme="dark"] .viewer-content::before,
[data-theme="dark"] .journal-editor::before,
[data-theme="dark"] .editor-header::before,
[data-theme="dark"] .timeline-grid::before,
[data-theme="dark"] .timeline-cell::before,
[data-theme="dark"] .entry-badge::before,
[data-theme="dark"] .week-entry-group::before,
[data-theme="dark"] .week-entries-header::before,
[data-theme="dark"] .period-entry-item::before,
[data-theme="dark"] .export-bar::before,
[data-theme="dark"] .nav-button::before,
[data-theme="dark"] .view-mode-button::before,
[data-theme="dark"] .preferences-container::before,
[data-theme="dark"] .preferences-header::before,
[data-theme="dark"] .preferences-section::before,
[data-theme="dark"] .preference-note::before,
[data-theme="dark"] .about-section::before,
[data-theme="dark"] .editor-form::before,
[data-theme="dark"] .editor-footer::before,
[data-theme="dark"] .confirm-dialog::before,
[data-theme="dark"] .week-entry-item::before,
[data-theme="dark"] .month-week-entries-section::before,
[data-theme="dark"] .entry-card::before,
[data-theme="dark"] .entry-card-full::before,
[data-theme="dark"] .cell-date::before,
[data-theme="dark"] .day-header::before,
[data-theme="dark"] .hotkey-diagram-hologram::before,
[data-theme="dark"] .hotkey-key-item::before,
[data-theme="dark"] .hotkey-key::before,
[data-theme="dark"] .tag::before,
[data-theme="dark"] .new-entry-button::before,
[data-theme="dark"] .new-entry-button-header::before,
[data-theme="dark"] .add-tag-button::before,
[data-theme="dark"] .save-button::before,
[data-theme="dark"] .cancel-button::before,
[data-theme="dark"] .delete-button::before,
[data-theme="dark"] .reset-button::before,
[data-theme="dark"] .export-button::before,
[data-theme="dark"] .export-select::before,
[data-theme="dark"] .global-timeline-minimap::before,
[data-theme="dark"] .minimap-container::before {
  mix-blend-mode: screen;
  opacity: 0.25;
  filter: contrast(1.2) brightness(0.8);
}

/* Minimap enhanced shadow depth with noise - shadows glow with saturation and depth */
.global-timeline-minimap::after,
.minimap-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  background-size: 150px 150px;
  animation: paperNoise 25s ease-in-out infinite reverse;
  mix-blend-mode: multiply;
  opacity: 0.2;
  z-index: 0;
  /* Optimized: Removed blur filter - use saturate and contrast only */
  filter: saturate(1.5) contrast(1.2);
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  /* Ensure pseudo-element doesn't extend beyond parent */
  max-width: 100%;
  box-sizing: border-box;
  overflow: hidden;
}

/* Dark theme - enhanced glow in shadows with deeper saturation */
[data-theme="dark"] .global-timeline-minimap::after,
[data-theme="dark"] .minimap-container::after {
  mix-blend-mode: color-burn;
  opacity: 0.3;
  /* Optimized: Removed blur filter - use saturate, contrast, and brightness only */
  filter: saturate(1.8) contrast(1.4) brightness(0.85);
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

body {
  /* Multilingual font stack: Noto Sans for comprehensive Unicode support, Inter for Latin text, system fonts as fallback */
  font-family: 'Noto Sans', 'Noto Sans SC', 'Noto Sans Arabic', 'Noto Sans Hebrew', 'Noto Sans Thai',
    'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    'Microsoft YaHei', 'SimHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: transparent; /* Changed from #f5f5f5 to transparent to allow background art to show */
  color: #333;
  overflow: hidden;
}

/* Wall-painted text styling utility */
.wall-text {
  font-family: 'Bebas Neue', 'Impact', 'Arial Black', 'Franklin Gothic Heavy', 'Arial Narrow', sans-serif;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Wall-painted text shadows - scaled by font size */
.wall-text-small {
  text-shadow: 
    1px 1px 0px rgba(0, 0, 0, 0.15),
    2px 2px 0px rgba(0, 0, 0, 0.1),
    3px 3px 4px rgba(0, 0, 0, 0.08);
}

.wall-text-medium {
  text-shadow: 
    1.5px 1.5px 0px rgba(0, 0, 0, 0.15),
    3px 3px 0px rgba(0, 0, 0, 0.1),
    4px 4px 6px rgba(0, 0, 0, 0.08),
    0 0 1px rgba(0, 0, 0, 0.1);
}

.wall-text-large {
  text-shadow: 
    2px 2px 0px rgba(0, 0, 0, 0.15),
    4px 4px 0px rgba(0, 0, 0, 0.1),
    6px 6px 8px rgba(0, 0, 0, 0.08),
    0 0 2px rgba(0, 0, 0, 0.1);
}

/* Theme support */
[data-theme="light"] html,
[data-theme="light"] body {
  background: #ffffff;
  color: #212121;
  --theme-body-bg: #ffffff;
  
  /* Profile Selector Theme Variables */
  --theme-text: #212121;
  --theme-panel-bg: #ffffff;
  --theme-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --theme-border: 1px solid #e0e0e0;
  --theme-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --theme-heading: #212121;
  --theme-text-secondary: #757575;
  --theme-panel-bg-secondary: #f5f5f5;
  --theme-input-bg: #ffffff;
  --theme-accent: #667eea;
  --theme-focus-ring: rgba(102, 126, 234, 0.2);
  --theme-error-bg: #ffebee;
  --theme-error-border: #f44336;
  --theme-error-text: #c62828;
  --theme-card-bg: #ffffff;
  --theme-card-active-bg: #f5f5f5;
  --theme-card-header-bg: #fafafa;
  --theme-button-hover-bg: rgba(102, 126, 234, 0.1);
  --theme-button-active-bg: rgba(102, 126, 234, 0.15);
  --theme-badge-default-bg: #e3f2fd;
  --theme-badge-default-text: #1976d2;
  --theme-badge-active-bg: #c8e6c9;
  --theme-badge-active-text: #2e7d32;
  --theme-scrollbar-track: #f5f5f5;
  --theme-scrollbar-thumb: #bdbdbd;
  --theme-scrollbar-thumb-hover: #9e9e9e;
  --theme-button-primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --theme-button-primary-text: #ffffff;
  --theme-button-secondary-bg: #f5f5f5;
  --theme-button-secondary-text: #212121;
  --theme-button-secondary-hover: #e0e0e0;
  --theme-button-danger-bg: #ffebee;
  --theme-button-danger-text: #c62828;
  --theme-button-danger-hover: #ffcdd2;
  --theme-input-hover: #fafafa;
  --theme-accent-hover: #764ba2;
  --theme-overlay: rgba(0, 0, 0, 0.5);
  --theme-divider: linear-gradient(90deg, transparent 0%, rgba(102, 126, 234, 0.3) 50%, transparent 100%);
}

[data-theme="light"] #root {
  background: #ffffff;
}

[data-theme="dark"] html,
[data-theme="dark"] body {
  background: #1a1a1a;
  color: #e0e0e0;
  --theme-body-bg: #1a1a1a;
  
  /* Profile Selector Theme Variables */
  --theme-text: #e0e0e0;
  --theme-panel-bg: #2d2d2d;
  --theme-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  --theme-border: 1px solid #404040;
  --theme-gradient: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
  --theme-heading: #ffffff;
  --theme-text-secondary: #b0b0b0;
  --theme-panel-bg-secondary: #353535;
  --theme-input-bg: #252525;
  --theme-accent: #4a90e2;
  --theme-focus-ring: rgba(74, 144, 226, 0.3);
  --theme-error-bg: #4a1a1a;
  --theme-error-border: #ff4444;
  --theme-error-text: #ff8888;
  --theme-card-bg: #2d2d2d;
  --theme-card-active-bg: #353535;
  --theme-card-header-bg: #353535;
  --theme-button-hover-bg: rgba(74, 144, 226, 0.2);
  --theme-button-active-bg: rgba(74, 144, 226, 0.3);
  --theme-badge-default-bg: #2d4a6d;
  --theme-badge-default-text: #88b3ff;
  --theme-badge-active-bg: #2d4a2d;
  --theme-badge-active-text: #88ff88;
  --theme-scrollbar-track: #252525;
  --theme-scrollbar-thumb: #555555;
  --theme-scrollbar-thumb-hover: #666666;
  --theme-button-primary-bg: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
  --theme-button-primary-text: #ffffff;
  --theme-button-secondary-bg: #3d3d3d;
  --theme-button-secondary-text: #e0e0e0;
  --theme-button-secondary-hover: #4d4d4d;
  --theme-button-danger-bg: #4a1a1a;
  --theme-button-danger-text: #ff8888;
  --theme-button-danger-hover: #5a2a2a;
  --theme-input-hover: #2d2d2d;
  --theme-accent-hover: #5aa0f2;
  --theme-overlay: rgba(0, 0, 0, 0.7);
  --theme-divider: linear-gradient(90deg, transparent 0%, rgba(74, 144, 226, 0.4) 50%, transparent 100%);
}

[data-theme="dark"] #root {
  background: #1a1a1a;
}

/* When custom background image is present, make all theme backgrounds transparent */
/* Use html element selector for higher specificity to override theme rules */
html[data-custom-background="true"][data-theme] html,
html[data-custom-background="true"][data-theme] body,
html[data-custom-background="true"][data-theme] #root,
html[data-custom-background="true"][data-theme] .app,
html[data-custom-background="true"][data-theme] .app-content,
html[data-custom-background="true"][data-theme] .timeline-section,
html[data-custom-background="true"][data-theme] .editor-section {
  background: transparent !important; /* Custom image takes priority */
}

/* Apply extracted background colors to transparent panels (light theme only) */
[data-theme="light"] .month-entry-item {
  background: var(--bg-extracted-panel, transparent);
  border-color: var(--bg-extracted-border, transparent);
  color: var(--bg-extracted-text, inherit);
}

[data-theme="light"] .week-entry-item {
  background: var(--bg-extracted-panel, #f5f5f5);
  border-left-color: var(--bg-extracted-accent, #4caf50);
}

[data-theme="light"] .timeline-cell {
  background: var(--bg-extracted-panel, transparent);
  border-color: var(--bg-extracted-border, #e0e0e0);
}

[data-theme="light"] .timeline-cell:hover {
  border-color: var(--bg-extracted-accent, #4a90e2);
}

[data-theme="light"] .week-entry-group {
  background: var(--bg-extracted-panel, transparent);
  border-color: var(--bg-extracted-border, #e0e0e0);
}

[data-theme="light"] .entry-viewer {
  background: var(--bg-extracted-panel, transparent);
}

[data-theme="light"] .viewer-header {
  background: var(--bg-extracted-panel, transparent);
  border-bottom-color: var(--bg-extracted-border, #e0e0e0);
}

[data-theme="light"] .journal-editor-inline {
  background: var(--bg-extracted-panel, white);
}

[data-theme="light"] .editor-header {
  background: var(--bg-extracted-panel, linear-gradient(to bottom, #ffffff, #f5f5f5));
  border-bottom-color: var(--bg-extracted-border, #e0e0e0);
}

[data-theme="dark"] .app {
  background: #1a1a1a;
  color: #e0e0e0;
}

[data-theme="dark"] .app-content {
  background: #1a1a1a;
}

[data-theme="dark"] .timeline-section {
  background: #1a1a1a;
}

[data-theme="dark"] .editor-section {
  background: #252525;
  border-left-color: #4a90e2;
}

/* Navigation Bar Dark Theme */
[data-theme="dark"] .navigation-bar {
  background: #2d2d2d;
  border-bottom-color: #404040;
}

[data-theme="dark"] .nav-button,
[data-theme="dark"] .view-mode-button {
  background: #3d3d3d;
  border-color: #555;
  color: #e0e0e0;
}

[data-theme="dark"] .nav-button:hover,
[data-theme="dark"] .view-mode-button:hover {
  background: #4d4d4d;
  border-color: #666;
}


/* Timeline View Dark Theme */
[data-theme="dark"] .timeline-loading {
  color: #b0b0b0;
}

[data-theme="dark"] .weekday-header {
  background: #2d2d2d;
  border-bottom-color: #404040;
  color: #b0b0b0;
}

[data-theme="dark"] .timeline-grid {
  background: #2d2d2d;
}

[data-theme="dark"] .timeline-cell {
  background: #2d2d2d;
  border-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .timeline-cell:hover {
  background: #353535;
  border-color: #4a90e2;
}

[data-theme="dark"] .timeline-cell.empty-cell {
  background: #252525;
}

[data-theme="dark"] .timeline-cell.today {
  background: #1e3a5f;
  border-color: #4a90e2;
}

[data-theme="dark"] .timeline-cell.has-entries {
  background: #3d3520;
}

[data-theme="dark"] .cell-date {
  color: #e0e0e0;
  border-bottom-color: #404040;
}

[data-theme="dark"] .entry-badge {
  background: #3d3d3d;
  color: #e0e0e0;
  border-color: #555;
}

/* Override entry-badge color for light-colored entry types */
[data-theme="dark"] .entry-badge.entry-day,
[data-theme="dark"] .entry-badge.entry-week,
[data-theme="dark"] .entry-badge.entry-month,
[data-theme="dark"] .entry-badge.entry-year,
[data-theme="dark"] .entry-badge.entry-decade {
  color: inherit; /* Let the entry type class set the color */
}

[data-theme="dark"] .month-week-entries-section {
  background: #252525;
  border-left-color: #404040;
}

[data-theme="dark"] .week-entries-header {
  background: #2d2d2d;
  border-bottom-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .month-entries-header {
  background: #2d2d2d;
  border-bottom-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .week-entry-group {
  background: #2d2d2d;
  border-color: #404040;
}

[data-theme="dark"] .week-entry-group-header {
  border-bottom-color: #404040;
}

[data-theme="dark"] .week-label {
  color: #b0b0b0;
}

[data-theme="dark"] .week-entry-title {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .month-entry-item {
  background: #353535 !important;
  border-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .month-entry-item:hover {
  background: #3d3d3d !important;
  border-color: #ff9800;
}

[data-theme="dark"] .month-entry-title {
  color: #ffffff;
}

[data-theme="dark"] .month-entry-preview {
  color: #d0d0d0;
}

[data-theme="dark"] .badge-title {
  color: #1a1a1a;
  font-weight: 500;
}

/* Ensure badge titles are dark on light-colored entry backgrounds */
[data-theme="dark"] .entry-day .badge-title,
[data-theme="dark"] .entry-week .badge-title,
[data-theme="dark"] .entry-month .badge-title,
[data-theme="dark"] .entry-year .badge-title,
[data-theme="dark"] .entry-decade .badge-title {
  color: #1a1a1a;
}

[data-theme="dark"] .card-title {
  color: #1a1a1a;
  font-weight: 600;
}

[data-theme="dark"] .card-title-full {
  color: #1a1a1a;
  font-weight: 600;
}

[data-theme="dark"] .day-header h2 {
  color: #ffffff !important;
}

[data-theme="dark"] .cell-month-label,
[data-theme="dark"] .cell-year-label {
  color: #ffffff;
  font-weight: 700;
}

[data-theme="dark"] .year-pixel-map {
  background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .month-pixel-map {
  background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .week-entry-item {
  background: #353535;
  border-left-color: #4caf50;
}

[data-theme="dark"] .week-entry-item:hover {
  background: #3d3d3d;
}

[data-theme="dark"] .week-entry-title {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .week-entry-empty {
  color: #888;
}

[data-theme="dark"] .week-entry-count {
  background: #4caf50;
  color: #ffffff;
}

[data-theme="dark"] .month-entry-empty {
  color: #888;
}

[data-theme="dark"] .month-entry-tag {
  background: rgba(144, 202, 249, 0.1);
  color: rgba(144, 202, 249, 0.6);
  border: 1px solid rgba(144, 202, 249, 0.2);
}

/* Entry Viewer Dark Theme */
[data-theme="dark"] .entry-viewer {
  background: #2d2d2d;
}

[data-theme="dark"] .viewer-header {
  background: linear-gradient(to bottom, #2d2d2d, #252525);
  border-bottom-color: #404040;
}

[data-theme="dark"] .edit-button {
  background: #3d3d3d;
  color: #e0e0e0;
  border-color: #555;
}

[data-theme="dark"] .edit-button:hover {
  background: #4d4d4d;
  border-color: #666;
}

[data-theme="dark"] .entry-meta small {
  color: #b0b0b0;
}

[data-theme="dark"] .viewer-content {
  background: #2d2d2d;
}

[data-theme="dark"] .viewer-title {
  color: #ffffff;
  font-weight: 700;
  border-bottom-color: #404040;
}

[data-theme="dark"] .viewer-text {
  color: #d0d0d0;
}

[data-theme="dark"] .viewer-empty {
  color: #b0b0b0;
}

[data-theme="dark"] .journal-entry-item {
  background: #353535;
  border-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .journal-entry-item:hover {
  background: #3d3d3d;
  border-color: #4a90e2;
}

[data-theme="dark"] .journal-entry-item.selected {
  background: #2d4a5f;
  border-color: #4a90e2;
}

[data-theme="dark"] .journal-entry-item.bulk-selected {
  background: #5a4a2d;
  border-color: #ffc107;
}

[data-theme="dark"] .journal-entry-item .entry-item-title,
[data-theme="dark"] .journal-entry-item .entry-item-preview,
[data-theme="dark"] .journal-entry-item .entry-item-content,
[data-theme="dark"] .journal-entry-item .entry-item-meta {
  color: #e0e0e0;
}

[data-theme="dark"] .journal-entry-item .entry-tag {
  background: rgba(144, 202, 249, 0.1);
  color: rgba(144, 202, 249, 0.6);
  border: 1px solid rgba(144, 202, 249, 0.2);
}

[data-theme="dark"] .journal-entry-item .entry-time-range {
  background: rgba(224, 224, 224, 0.15);
  color: rgba(224, 224, 224, 0.6);
}

[data-theme="dark"] .journal-entry-item .entry-date {
  color: rgba(224, 224, 224, 0.5);
}

[data-theme="dark"] .entry-card-full .card-content-full,
[data-theme="dark"] .entry-card-full .card-date,
[data-theme="dark"] .entry-card-full .entry-item-preview,
[data-theme="dark"] .entry-card-full .entry-item-content {
  color: #d0d0d0;
}

[data-theme="dark"] .entry-card {
  background: #353535 !important;
  border-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .entry-card.entry-decade {
  background: #353535 !important;
  border-left-color: #9c27b0;
}

[data-theme="dark"] .entry-card.entry-year {
  background: #353535 !important;
  border-left-color: #0277bd;
}

[data-theme="dark"] .entry-card.entry-month {
  background: #353535 !important;
  border-left-color: #ef6c00;
}

[data-theme="dark"] .entry-card.entry-week {
  background: #353535 !important;
  border-left-color: #2e7d32;
}

[data-theme="dark"] .entry-card.entry-day {
  background: #353535 !important;
  border-left-color: #c2185b;
}

[data-theme="dark"] .entry-card:hover {
  background: #3d3d3d !important;
}

[data-theme="dark"] .entry-card .card-title,
[data-theme="dark"] .entry-card .card-content,
[data-theme="dark"] .entry-card .card-date,
[data-theme="dark"] .entry-card .card-preview {
  color: #ffffff;
}

[data-theme="dark"] .entry-card .card-tag {
  background: #3d4a5d;
  color: #90caf9;
  border-color: #555;
}

[data-theme="dark"] .card-edit-button,
[data-theme="dark"] .card-edit-button-small {
  background: #2d2d2d;
  color: #888;
  border-color: #404040;
  opacity: 0.7;
}

[data-theme="dark"] .card-edit-button:hover,
[data-theme="dark"] .card-edit-button-small:hover {
  background: #353535;
  color: #aaa;
  border-color: #505050;
  opacity: 0.9;
}

[data-theme="dark"] .entry-card-full {
  background: #353535 !important;
  border-color: #404040;
  color: #e0e0e0;
}

[data-theme="dark"] .entry-card-full.entry-decade {
  background: #353535 !important;
  border-left-color: #9c27b0;
}

[data-theme="dark"] .entry-card-full.entry-year {
  background: #353535 !important;
  border-left-color: #0277bd;
}

[data-theme="dark"] .entry-card-full.entry-month {
  background: #353535 !important;
  border-left-color: #ef6c00;
}

[data-theme="dark"] .entry-card-full.entry-week {
  background: #353535 !important;
  border-left-color: #2e7d32;
}

[data-theme="dark"] .entry-card-full.entry-day {
  background: #353535 !important;
  border-left-color: #c2185b;
}

[data-theme="dark"] .entry-card-full:hover {
  background: #3d3d3d !important;
}

[data-theme="dark"] .entry-card-full.bulk-selected {
  background: #5a4a2d !important;
  border-color: #ffc107 !important;
}

[data-theme="dark"] .entry-card-full.bulk-selected:hover {
  background: #6a5a3d !important;
}

[data-theme="dark"] .period-entry-item {
  background: #2d2d2d;
  border-color: #404040;
}

[data-theme="dark"] .period-entry-item:hover {
  border-color: #4a90e2;
}

[data-theme="dark"] .period-entry-title {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .period-entry-date {
  color: #b0b0b0;
}

[data-theme="dark"] .period-entry-content {
  color: #d0d0d0;
}

[data-theme="dark"] .period-entry-tags {
  border-top-color: #404040;
}

[data-theme="dark"] .period-entry-tag {
  background: rgba(144, 202, 249, 0.1);
  color: rgba(144, 202, 249, 0.6);
  border: 1px solid rgba(144, 202, 249, 0.2);
}

/* Journal Editor Dark Theme */
[data-theme="dark"] .journal-editor {
  background: #2d2d2d;
}

[data-theme="dark"] .editor-header {
  background: linear-gradient(to bottom, #2d2d2d, #252525);
  border-bottom-color: #404040;
}

[data-theme="dark"] .editor-header h3 {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .viewer-header h3 {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .badge-title {
  color: #ffffff;
  font-weight: 500;
}

[data-theme="dark"] .card-title {
  color: #ffffff;
  font-weight: 600;
}

[data-theme="dark"] .card-title-full {
  color: #ffffff;
  font-weight: 600;
}

/* Card titles should be light on dark entry card backgrounds */
[data-theme="dark"] .entry-card-full .card-title-full,
[data-theme="dark"] .entry-card .card-title,
[data-theme="dark"] .entry-card-full.entry-day .card-title-full,
[data-theme="dark"] .entry-card-full.entry-week .card-title-full,
[data-theme="dark"] .entry-card-full.entry-month .card-title-full,
[data-theme="dark"] .entry-card-full.entry-year .card-title-full,
[data-theme="dark"] .entry-card-full.entry-decade .card-title-full,
[data-theme="dark"] .entry-card.entry-day .card-title,
[data-theme="dark"] .entry-card.entry-week .card-title,
[data-theme="dark"] .entry-card.entry-month .card-title,
[data-theme="dark"] .entry-card.entry-year .card-title,
[data-theme="dark"] .entry-card.entry-decade .card-title {
  color: #ffffff;
}

[data-theme="dark"] .day-header h2 {
  color: #ffffff !important;
  font-weight: 600;
}

[data-theme="dark"] .cell-month-label,
[data-theme="dark"] .cell-year-label {
  color: #ffffff;
  font-weight: 700;
}

[data-theme="dark"] .date-label-decade {
  color: #9c27b0;
}

[data-theme="dark"] .date-label-year {
  color: #0277bd;
}

[data-theme="dark"] .date-label-month {
  color: #ef6c00;
}

[data-theme="dark"] .date-label-week {
  color: #2e7d32;
}

[data-theme="dark"] .date-label-day {
  color: #c2185b;
}

[data-theme="dark"] .editor-form input,
[data-theme="dark"] .editor-form textarea {
  background: #353535;
  border-color: #555;
  color: #e0e0e0;
}

[data-theme="dark"] .editor-form input:focus,
[data-theme="dark"] .editor-form textarea:focus {
  border-color: #4a90e2;
  background: #3d3d3d;
}

[data-theme="dark"] .tag-input-container {
  background: #353535;
  border-color: #555;
}

[data-theme="dark"] .tag {
  background: #1e3a5f;
  color: #90caf9;
}

[data-theme="dark"] .tag:hover {
  background: #2563eb;
}

/* Global Timeline Minimap Dark Theme */
[data-theme="dark"] .global-timeline-minimap {
  background: linear-gradient(to bottom, #252525, #1e1e1e);
  border-bottom-color: #404040;
}

[data-theme="auto"] {
  /* System theme - handled by OS */
  @media (prefers-color-scheme: dark) {
    background: #1e1e1e;
    color: #e0e0e0;
  }
}

/* Font size support - apply to html element for proper inheritance */
html[data-font-size="xxxSmall"] {
  font-size: 0.625rem !important;
}

html[data-font-size="xxSmall"] {
  font-size: 0.75rem !important;
}

html[data-font-size="xSmall"] {
  font-size: 0.8125rem !important;
}

html[data-font-size="small"] {
  font-size: 0.875rem !important;
}

html[data-font-size="medium"] {
  font-size: 1rem !important;
}

html[data-font-size="large"] {
  font-size: 1.125rem !important;
}

html[data-font-size="xLarge"] {
  font-size: 1.25rem !important;
}

html[data-font-size="xxLarge"] {
  font-size: 1.375rem !important;
}

html[data-font-size="xxxLarge"] {
  font-size: 1.5rem !important;
}

#root {
  width: 100%;
  height: 100vh;
  overflow: hidden;
  box-sizing: border-box;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

button {
  cursor: pointer;
  border: none;
  background: none;
  font-family: inherit;
}

input, textarea {
  font-family: inherit;
}

